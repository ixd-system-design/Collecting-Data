<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta
    name="viewport"
    content="width=device-width initial-scale=1"
  />

  <title>Collecting Data</title>

  <link
    rel="preconnect"
    href="https://fonts.googleapis.com"
  >
  <link
    rel="preconnect"
    href="https://fonts.gstatic.com"
    crossorigin
  >
  <link
    href="https://fonts.googleapis.com/css2?family=Jost:wght@100..900&display=swap"
    rel="stylesheet"
  >


  <link
    rel="stylesheet"
    href="style.css"
  />


</head>

<body>
  <header>
    <h1>Collecting Data</h1>
    <h4>POST content to an API Endpoint from an HTML Form to be stored in a Database.</h4>

    <div class="intro">
      <p>Previously we published data from a database by <a
          href="https://github.com/ixd-system-design/API-Endpoints-for-Publishing-and-Searching"
        >creating our own API</a>. Now, let's build functionality to allow users to submit and store data. We will add
        two core elements:</p>
      <ul>
        <li>A <a
            target="_blank"
            href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"
          >POST</a> endpoint on the backend.</li>
        <li>An <a href="https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form">HTML Form</a> on the
          front-end.</li>
      </ul>
      <p> Form submissions are sent as JSON data in the body of a <a
          target="_blank"
          href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Methods/POST"
        >POST</a> request to an API endpoint, and saved to <a
          href="https://www.mongodb.com/products/platform/atlas-database"
        >MongoDB Atlas</a>.
        API Endpoints are defined by <a href="https://expressjs.com">Express</a>, using <a
          href="https://www.prisma.io/orm"
        >Prisma</a> to communicate with the database.
      </p>
      <p>When successful, we will log the submission to the console, and also refresh the data list below. NOTE: this
        demo implements the 'C' and 'R' of 'CRUD' (Create and Read) . We will deal with the 'U' and 'D' (Update and
        Delete) elsewhere.</p>
      </p>
    </div>
  </header>

  <section id="status">
    <p id="readyStatus">‚úÖ MongoDB is Ready</p>
    <p id="notReadyStatus">‚ùå MongoDB is not connected. Please check your connection string in <code>.env</code> file.
    </p>
  </section>

  <main>
    <h2>üêà <span>Share a Cat</span></h2>
    <p>Share your kitty with the community</p>
    <form id="myForm">
      <fieldset>
        <label for="name">Cat Name</label>
        <input
          required
          type="text"
          name="name"
          id="name"
          placeholder="e.g. Sofia"
          autocomplete="off"
        />
        <small class="validation">Name is required</small>
      </fieldset>

      <fieldset>
        <label for="birthDate">Birth Date</label>
        <input
          type="date"
          name="birthDate"
          id="birthDate"
        />
      </fieldset>

      <fieldset>
        <label for="primaryColor">Primary Color</label>
        <input
          type="color"
          name="primaryColor"
          id="primaryColor"
          value="#5f5854"
        />
      </fieldset>

      <fieldset>
        <label for="secondaryColor">Secondary Color</label>
        <input
          type="color"
          name="secondaryColor"
          id="secondaryColor"
          value="#c4c8cf"
        />
      </fieldset>

      <fieldset>
        <label for="breed">Breed</label>
        <select
          name="breed"
          id="breed"
        >
          <option
            value=""
            disabled
            selected
          >Select a Breed</option>
          <optgroup label="Domestic">
            <option value="Abyssinian">Abyssinian</option>
            <option value="Bengal">Bengal</option>
            <option value="Burmese">Burmese</option>
            <option value="Chartreux">Chartreux</option>
            <option value="Maine Coon">Maine Coon</option>
            <option value="Persian">Persian</option>
            <option value="Ragdoll">Ragdoll</option>
            <option value="Shorthair">Shorthair</option>
            <option value="Siamese">Siamese</option>
            <option value="Sphynx">Sphynx</option>
            <option value="Ragamuffin">Ragamuffin</option>
          </optgroup>
          <optgroup label="Exotic">
            <option value="Tiger">Tiger</option>
            <option value="Lion">Lion</option>
            <option value="Panther">Panther</option>
            <option value="Jaguar">Jaguar</option>
            <option value="Lynx">Lynx</option>
          </optgroup>
          <optgroup label="Other">
            <option value="Other">Other</option>
            <option value="Unknown">Unknown</option>
          </optgroup>
        </select>
      </fieldset>

      <fieldset>
        <label for="description">Description</label>
        <small>Provide a brief biography.</small>
        <textarea
          placeholder="Biography"
          required
          minlength="20"
          name="description"
          id="description"
          rows="6"
          cols="30"
        ></textarea>
        <small class="validation">Bio must be at least 20 characters.</small>
      </fieldset>

      <fieldset>
        <label for="playfulness">Playfulness</label>
        <small>Chill or chaotic?</small>
        <input
          type="range"
          min="0"
          max="10"
          name="playfulness"
          id="playfulness"
        />
      </fieldset>

      <fieldset>
        <label for="appetite">Appetite</label>
        <small>Is this a hungry Cat?</small>
        <input
          type="range"
          min="0"
          max="10"
          name="appetite"
          id="appetite"
        />
      </fieldset>

      <fieldset>
        <legend>Food</legend>
        <small>Any Preferences?</small>
        <label for="wet">
          <input
            type="radio"
            id="wet"
            name="food"
            value="wet"
          />
          <span>Wet</span>
        </label>
        <label for="dry">
          <input
            type="radio"
            id="dry"
            name="food"
            value="dry"
          />
          <span>Dry</span>
        </label>
        <label for="mixed">
          <input
            type="radio"
            id="mixed"
            name="food"
            value="mixed"
          />
          <span>Mixed</span>
        </label>
      </fieldset>

      <fieldset>
        <legend>Rescue Status</legend>
        <label for="isAdopted">
          <input
            type="checkbox"
            name="isAdopted"
            id="isAdopted"
          />
          <span>Adopted</span>
        </label>
      </fieldset>

      <fieldset>
        <label for="microchip">Microchip Number</label>
        <small>It's usually nine digits</small>
        <input
          required
          type="number"
          name="microchip"
          step="1"
          max="999999999"
          id="microchip"
          placeholder="e.g. 123456789"
        />
      </fieldset>

      <fieldset>
        <button class="save">Save</button>
        <button class="reset">Reset</button>
      </fieldset>
    </form>


  </main>

  <section id="content">
  </section>

  <section>
    <h3>Learning Prompts</h3>
    <p>Can you add a connection string to the NodeJS environment (e.g. .env file) for your own MongoDB Atlas Cluster?
    </p>
    <p>Use MongoDB Compass to verify that your data collection form is working. </p>
    <p>Looking ahead: in the future we will build a full CRUD implementation. Can you envision how we might add features
      for Updating and deleting individual records?</p>
  </section>

  <footer>
    Created by <a href="https://nsitu.ca">Harold Sikkema</a> in the context of
    Systems Design in the Interaction Design program at Sheridan College.
  </footer>

  <script
    src="script.js"
    type="module"
  ></script>

</body>

</html>